<!DOCTYPE html>
<html>

<head>
	<title>Ping Pong Game</title>
</head>

<body>
	<canvas id="canvas" width="800" height="400"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		//Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.

		app.onInit = function () {
			var paddleWidth = app.width / 40
			var paddleHeight = app.height / 4
			this.nodes.push({
				id: 'player-one',
				x: 0,
				y: (app.height - paddleHeight) / 2,
				width: paddleWidth,
				height: paddleHeight,
				speed: 3,
				color: 'black'

			});

			this.nodes.push({
				id: 'player-two',
				x: app.width - paddleWidth,
				y: (app.height - paddleHeight) / 2,
				width: paddleWidth,
				height: paddleHeight,
				speed: 3,
				color: 'black'
			});
			this.nodes.push({
				id: 'ball',
				x: app.width / 2,
				y: app.height / 2,
				width: 10,
				height: 10,
				radius: 3,
				color: 'red'
			});
			/**
			 * @param{KeyboardEvent} event
			 **/
			window.onkeydown = function (event) {
				switch (event.code) {
					case 'KeyW':
						app.getNode('player-one').y -= app.getNode('player-one').speed;

						if (app.getNode('player-one').y < 0) { app.getNode('player-one').y = 0 };
						break;
					case 'KeyS':

						app.getNode('player-one').y += app.getNode('player-one').speed;

						if (app.getNode('player-one').y + paddleHeight > app.height) { app.getNode('player-one').y = app.height - paddleHeight };
						break;
					case 'ArrowUp':
						app.getNode('player-two').y -= app.getNode('player-two').speed;

						if (app.getNode('player-two').y < 0) { app.getNode('player-two').y = 0 };
						break;
					case 'ArrowDown':
						app.getNode('player-two').y += app.getNode('player-two').speed;

						if (app.getNode('player-two').y + paddleHeight > app.height) { app.getNode('player-two').y = app.height - paddleHeight };
						break;
					case 'Space':
						break;
					default:
						console.log(event);
						break;
				}
			}
		};
		app.onUpdate = function (time) {


			//this.getNode('player-two').y++;

			// if (Math.cos(this.timestamp / 100) > 0) {
			// 	this.getNode('player-one').direction = -1;
			// } else {
			// 	this.getNode('player-one').direction = 1;
			// }

			// this.getNode('player-one').x += this.getNode('player-one').direction;
		};
	</script>
</body>

</html>