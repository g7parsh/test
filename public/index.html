<!DOCTYPE html>
<html>

<head>
	<title>Ping Pong Game</title>
</head>

<body>
	<canvas id="canvas" width="800" height="400"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		//Sample functions, remove these functions and design ping-pong game with onInit and onUpdate.

		app.onInit = function () {
			var paddleWidth = app.width / 40
			var paddleHeight = app.height / 4
			this.nodes.push({
				id: 'player-one',
				x: 0,
				y: (app.height - paddleHeight) / 2,
				width: paddleWidth,
				height: paddleHeight,
				speed: 3,
				color: 'black'

			});

			this.nodes.push({
				id: 'player-two',
				x: app.width - paddleWidth,
				y: (app.height - paddleHeight) / 2,
				width: paddleWidth,
				height: paddleHeight,
				speed: 3,
				color: 'black'
			});
			this.nodes.push({
				id: 'ball',
				x: app.width / 2,
				y: app.height / 2,
				width: 10,
				height: 10,
				speed: 5,
				radius: 3,
				xDir: 1,
				yDir: 1,
				color: 'red',


			});
			/**
			 * @param{KeyboardEvent} event
			 **/
			window.onkeydown = function (event) {
				switch (event.code) {
					case 'KeyW':

						app.getNode('player-one').y -= app.getNode('player-one').speed;

						if (app.getNode('player-one').y < 0) { app.getNode('player-one').y = 0 };
						break;
					case 'KeyS':

						app.getNode('player-one').y += app.getNode('player-one').speed;

						if (app.getNode('player-one').y + paddleHeight > app.height) { app.getNode('player-one').y = app.height - paddleHeight };
						break;
					case 'ArrowUp':
						app.getNode('player-two').y -= app.getNode('player-two').speed;

						if (app.getNode('player-two').y < 0) { app.getNode('player-two').y = 0 };
						break;
					case 'ArrowDown':
						app.getNode('player-two').y += app.getNode('player-two').speed;

						if (app.getNode('player-two').y + paddleHeight > app.height) { app.getNode('player-two').y = app.height - paddleHeight };
						break;
					case 'Space':
						break;
					default:
						console.log(event);
						break;
				}
			}
		};

		app.collisionCheck = function (player, ball) {

		}
		app.reset = function () { };
		app.pause = function () { };
		app.onUpdate = function (time) {
			this.getNode('ball').y += Math.sin((Math.PI * (1 / 4)) * this.getNode('ball').speed) * this.getNode('ball').yDir;
			this.getNode('ball').x += Math.cos((Math.PI * (3 / 4)) * this.getNode('ball').speed) * this.getNode('ball').xDir;
			if (this.getNode('ball').y < 0 || this.getNode('ball').y + this.getNode('ball').height > app.height) {
				this.getNode('ball').yDir *= -1;
			}

			if (this.getNode('ball').x < 0 || this.getNode('ball').x + this.getNode('ball').width > app.width) {
				this.getNode('ball').xDir *= -1;
			}


			//this.getNode('player-two').y++;

			// if (Math.cos(this.timestamp / 100) > 0) {
			// 	this.getNode('player-one').xDir = -1;
			// } else {
			// 	this.getNode('player-one').xDir = 1;
			// }

			// this.getNode('player-one').x += this.getNode('player-one').xDir;
		};
	</script>
</body>

</html>